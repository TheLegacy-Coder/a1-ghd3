<!DOCTYPE html>
<div id="container"></div>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

<!-- I was having issues with setup, so referred to the following resource: https://d3js.org/getting-started -->
<script type="module">
  console.log(d3); // test if d3 is loaded
  
  // As a note, I'm attempting to recreate the Audi Quattro Sport from https://supercarnostalgia.com/blog/for-sale-1984-audi-quattro-sport-usa-1

  // Again, referred to https://d3js.org/getting-started for creating and displaying the svg since it's been a while since I've used d3
  const svg = d3.create("svg")
    .attr("width", 800)
    .attr("height", 600);

  // For creating shapes and lines, referred to https://d3-graph-gallery.com/graph/shape.html
  // and https://www.youtube.com/watch?v=bp2GF8XcJdY
  // Added the bumper and grill of the car
  svg.append("rect")
    .attr("x", 250)
    .attr("y", 150)
    .attr("width", 300)
    .attr("height", 125)
    .attr("stroke", "black")
    .attr("fill", "red");

  svg.append("rect")
    .attr("x", 260)
    .attr("y", 160)
    .attr("width", 280)
    .attr("height", 50)
    .attr("fill", "black");

  // Added the headlights
  // Referred to https://d3js.org/d3-selection/events and https://stackoverflow.com/questions/25123003/how-to-assign-click-event-to-every-svg-element-in-d3js for mouseover functionality
  svg.append("rect")
    .attr("x", 265)
    .attr("y", 165)
    .attr("width", 50)
    .attr("height", 40)
    .attr("fill", "lightgray")
    .on("mouseover", function() {
      if (d3.select(this).attr("fill") == "lightgray") {
        d3.select(this).attr("fill", "yellow");
      } else {
        d3.select(this).attr("fill", "lightgray");
      };
    });
  
  // Same references as the other headlight
  svg.append("rect")
    .attr("x", 485)
    .attr("y", 165)
    .attr("width", 50)
    .attr("height", 40)
    .attr("fill", "lightgray")
    .on("mouseover", function() {
      if (d3.select(this).attr("fill") == "lightgray") {
        d3.select(this).attr("fill", "yellow");
      } else {
        d3.select(this).attr("fill", "lightgray");
      };
    });

  // Added intake vents to the bumper
  // Top half intake vents
  svg.append("rect")
    .attr("x", 280)
    .attr("y", 220)
    .attr("width", 75)
    .attr("height", 20)
    .attr("fill", "black");

  svg.append("rect")
    .attr("x", 365)
    .attr("y", 220)
    .attr("width", 75)
    .attr("height", 20)
    .attr("fill", "black");

  svg.append("rect")
    .attr("x", 450)
    .attr("y", 220)
    .attr("width", 75)
    .attr("height", 20)
    .attr("fill", "black");

  // Bottom half intake vents
  svg.append("rect")
    .attr("x", 270)
    .attr("y", 250)
    .attr("width", 85)
    .attr("height", 20)
    .attr("fill", "black");

  svg.append("rect")
    .attr("x", 365)
    .attr("y", 250)
    .attr("width", 75)
    .attr("height", 20)
    .attr("fill", "black");

  svg.append("rect")
    .attr("x", 450)
    .attr("y", 250)
    .attr("width", 85)
    .attr("height", 20)
    .attr("fill", "black");  

  // Added turn signal lights
  svg.append("circle")
    .attr("cx", 265)
    .attr("cy", 230)
    .attr("r", 8)
    .attr("fill", "orange");

  svg.append("circle")
    .attr("cx", 535)
    .attr("cy", 230)
    .attr("r", 8)
    .attr("fill", "orange");

  // Added the Audi logo rings on top of the grill (still need to determine how to layer them properly)
  svg.append("circle")
    .attr("cx", 360)
    .attr("cy", 185)
    .attr("r", 20)
    .attr("stroke", "grey");

  svg.append("circle")
    .attr("cx", 385)
    .attr("cy", 185)
    .attr("r", 20)
    .attr("stroke", "grey");
  
  svg.append("circle")
    .attr("cx", 410)
    .attr("cy", 185)
    .attr("r", 20)
    .attr("stroke", "grey");

  svg.append("circle")
    .attr("cx", 435)
    .attr("cy", 185)
    .attr("r", 20)
    .attr("stroke", "grey");

  // Added the hood of the car using a trapezoid/polygon, and using path
  // The following video gave me the idea to use area(): https://www.youtube.com/watch?v=cfuJJEdEWe8
  // Referred to https://www.geeksforgeeks.org/javascript/d3-js-area-method/ for properly using area()
  const hoodPositionalData = [{xVal: 250, yVal: 150}, {xVal: 300, yVal: 125}, {xVal: 500, yVal: 125}, {xVal: 550, yVal: 150}];

  const hood = d3.area()
    .x((hoodPositionalData) => hoodPositionalData.xVal)
    .y0((hoodPositionalData) => 150)
    .y1((hoodPositionalData) => hoodPositionalData.yVal);

  svg.append("path")
    .attr("d", hood(hoodPositionalData))
    .attr("stroke", "black")
    .attr("fill", "red");

  // Added the mirrors of the car
  svg.append("rect")
    .attr("x", 490)
    .attr("y", 110)
    .attr("width", 40)
    .attr("height", 15);

  svg.append("rect")
    .attr("x", 270)
    .attr("y", 110)
    .attr("width", 40)
    .attr("height", 15);

  // Added the windshield of the car (similar to hood logic)
  // Same references as the hood
  const windshieldPositionalData = [{xVal: 300, yVal: 125}, {xVal: 330, yVal: 75}, {xVal: 470, yVal: 75}, {xVal: 500, yVal: 125}];

  const windshield = d3.area()
    .x((windshieldPositionalData) => windshieldPositionalData.xVal)
    .y0((windshieldPositionalData) => 125)
    .y1((windshieldPositionalData) => windshieldPositionalData.yVal);

  svg.append("path")
    .attr("d", windshield(windshieldPositionalData))
    .attr("stroke", "red")
    .attr("stroke-width", 3)
    .attr("fill", "lightblue");

  // For creating lines specifically in this case, referred to https://d3-graph-gallery.com/graph/shape.html (as mentioned previously)
  // Added the lines on top of the car's hood
  svg.append("line")
    .attr("x1", 300)
    .attr("y1", 145)
    .attr("x2", 500)
    .attr("y2", 145)
    .attr("stroke", "black");

  svg.append("line")
    .attr("x1", 310)
    .attr("y1", 140)
    .attr("x2", 490)
    .attr("y2", 140)
    .attr("stroke", "black");

  svg.append("line")
    .attr("x1", 320)
    .attr("y1", 135)
    .attr("x2", 480)
    .attr("y2", 135)
    .attr("stroke", "black");

  // Added the tires
  svg.append("rect")
    .attr("x", 250)
    .attr("y", 275)
    .attr("width", 60)
    .attr("height", 20)
    .attr("stroke", "black")
    .attr("fill", "dimgray");

  svg.append("rect")
    .attr("x", 490)
    .attr("y", 275)
    .attr("width", 60)
    .attr("height", 20)
    .attr("stroke", "black")
    .attr("fill", "dimgray");

  container.append(svg.node());

</script>
